<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Monitoring System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        #weather-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin: 20px;
        }
        .weather-card {
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 20px;
            margin: 10px;
            width: 300px;
            box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.1);
        }
        .weather-card h3 {
            margin: 0 0 10px;
        }
        .alert {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Real-Time Weather Monitoring</h1>
    <div id="weather-container"></div>
    <div id="alerts-container"></div>
    <script>
            const apiKey = 'a27037d4df240e28a53c0d1cdb55ccd4';
    const cities = ['Delhi', 'Mumbai', 'Chennai', 'Bangalore', 'Kolkata', 'Hyderabad'];
    const thresholdTemperature = 35; // Celsius
    let cityWeatherData = {}; // Store all weather data for analysis
    let alertThresholds = { temp: 35 }; // User-defined thresholds

    // Fetch weather data from OpenWeatherMap
    async function fetchWeatherData(city) {
        const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;
        const response = await fetch(url);
        const data = await response.json();
        return {
            city: city,
            main: data.weather[0].main,
            temp: data.main.temp,
            feels_like: data.main.feels_like,
            dt: new Date(data.dt * 1000).toLocaleTimeString(),
        };
    }

    // Update weather data for all cities
    async function updateWeather() {
        const weatherContainer = document.getElementById('weather-container');
        weatherContainer.innerHTML = ''; // Clear previous data

        for (let city of cities) {
            const weather = await fetchWeatherData(city);
            cityWeatherData[city] = cityWeatherData[city] || [];
            cityWeatherData[city].push(weather);

            // Create weather card
            const weatherCard = document.createElement('div');
            weatherCard.classList.add('weather-card');
            weatherCard.innerHTML = `
                <h3>${city}</h3>
                <p>Condition: ${weather.main}</p>
                <p>Temperature: ${weather.temp}°C</p>
                <p>Feels Like: ${weather.feels_like}°C</p>
                <p>Time: ${weather.dt}</p>
            `;
            weatherContainer.appendChild(weatherCard);

            // Check for alerts
            checkForAlerts(weather);
        }

        calculateDailySummary();
    }

    // Check for alert conditions
    function checkForAlerts(weather) {
        const alertsContainer = document.getElementById('alerts-container');

        if (weather.temp > alertThresholds.temp) {
            const alert = document.createElement('div');
            alert.classList.add('alert');
            alert.textContent = `Alert: Temperature in ${weather.city} exceeded ${alertThresholds.temp}°C!`;
            alertsContainer.appendChild(alert);
        }
    }

    // Calculate daily summary: Average, Max, Min, Dominant weather
    function calculateDailySummary() {
        for (let city in cityWeatherData) {
            const dailyData = cityWeatherData[city];

            let totalTemp = 0;
            let maxTemp = -Infinity;
            let minTemp = Infinity;
            const weatherConditions = {};

            dailyData.forEach(data => {
                totalTemp += data.temp;
                if (data.temp > maxTemp) maxTemp = data.temp;
                if (data.temp < minTemp) minTemp = data.temp;

                // Count weather conditions
                weatherConditions[data.main] = (weatherConditions[data.main] || 0) + 1;
            });

            const avgTemp = (totalTemp / dailyData.length).toFixed(2);
            const dominantWeather = Object.keys(weatherConditions).reduce((a, b) => weatherConditions[a] > weatherConditions[b] ? a : b);

            console.log(`City: ${city}`);
            console.log(`Average Temp: ${avgTemp}°C`);
            console.log(`Max Temp: ${maxTemp}°C`);
            console.log(`Min Temp: ${minTemp}°C`);
            console.log(`Dominant Weather: ${dominantWeather}`);
        }
    }

    // Set up interval for continuous data fetching
    setInterval(updateWeather, 300000); // 5 minutes
    updateWeather(); // Initial call

    </script>
</body>
</html> -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Monitoring System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        #weather-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin: 20px;
        }
        .weather-card {
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 20px;
            margin: 10px;
            width: 300px;
            box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.1);
        }
        .weather-card h3 {
            margin: 0 0 10px;
        }
        .alert {
            color: red;
            font-weight: bold;
        }
        #threshold-section {
            margin: 20px;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        #threshold-section input {
            width: 50px;
            margin-left: 10px;
        }
        #alerts-container {
            margin: 20px;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>Real-Time Weather Monitoring</h1>
    
    <div id="threshold-section">
        <label for="temp-threshold">Set Temperature Alert Threshold (°C):</label>
        <input type="number" id="temp-threshold" value="35">
        <button onclick="updateThreshold()">Update Threshold</button>
    </div>

    <div id="weather-container"></div>

    <div id="alerts-container"></div>

    <script>
        const apiKey = 'a27037d4df240e28a53c0d1cdb55ccd4';
const cities = ['Delhi', 'Mumbai', 'Chennai', 'Bangalore', 'Kolkata', 'Hyderabad'];
let cityWeatherData = {}; // Store all weather data for analysis
let alertThresholds = { temp: 35 }; // User-defined thresholds

// Fetch weather data from OpenWeatherMap
async function fetchWeatherData(city) {
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;
    const response = await fetch(url);
    const data = await response.json();
    return {
        city: city,
        main: data.weather[0].main,
        temp: data.main.temp,
        feels_like: data.main.feels_like,
        dt: new Date(data.dt * 1000),
    };
}

// Update weather data for all cities
async function updateWeather() {
    const weatherContainer = document.getElementById('weather-container');
    weatherContainer.innerHTML = ''; // Clear previous data

    for (let city of cities) {
        const weather = await fetchWeatherData(city);
        cityWeatherData[city] = cityWeatherData[city] || [];
        cityWeatherData[city].push(weather);

        // Get the day of the week
        const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        const dayOfWeek = days[weather.dt.getDay()];

        // Create weather card
        const weatherCard = document.createElement('div');
        weatherCard.classList.add('weather-card');
        weatherCard.innerHTML = `
            <h3>${city}</h3>
            <p><strong>${dayOfWeek}</strong></p>
            <p>Condition: ${weather.main}</p>
            <p>Temperature: ${weather.temp}°C</p>
            <p>Feels Like: ${weather.feels_like}°C</p>
            <p>Time: ${weather.dt.toLocaleTimeString()}</p>
        `;
        weatherContainer.appendChild(weatherCard);

        // Check for alerts
        checkForAlerts(weather);
    }

    calculateDailySummary();
}

// Check for alert conditions
function checkForAlerts(weather) {
    const alertsContainer = document.getElementById('alerts-container');

    if (weather.temp > alertThresholds.temp) {
        const alert = document.createElement('div');
        alert.classList.add('alert');
        alert.textContent = `Alert: Temperature in ${weather.city} exceeded ${alertThresholds.temp}°C!`;
        alertsContainer.appendChild(alert);
    }
}

// Calculate daily summary: Average, Max, Min, Dominant weather
function calculateDailySummary() {
    for (let city in cityWeatherData) {
        const dailyData = cityWeatherData[city];

        let totalTemp = 0;
        let maxTemp = -Infinity;
        let minTemp = Infinity;
        const weatherConditions = {};

        dailyData.forEach(data => {
            totalTemp += data.temp;
            if (data.temp > maxTemp) maxTemp = data.temp;
            if (data.temp < minTemp) minTemp = data.temp;

            // Count weather conditions
            weatherConditions[data.main] = (weatherConditions[data.main] || 0) + 1;
        });

        const avgTemp = (totalTemp / dailyData.length).toFixed(2);
        const dominantWeather = Object.keys(weatherConditions).reduce((a, b) => weatherConditions[a] > weatherConditions[b] ? a : b);

        console.log(`City: ${city}`);
        console.log(`Average Temp: ${avgTemp}°C`);
        console.log(`Max Temp: ${maxTemp}°C`);
        console.log(`Min Temp: ${minTemp}°C`);
        console.log(`Dominant Weather: ${dominantWeather}`);
    }
}

// Update the threshold for temperature alerts
function updateThreshold() {
    const newThreshold = document.getElementById('temp-threshold').value;
    alertThresholds.temp = Number(newThreshold);
    alert('Threshold updated to ' + newThreshold + '°C');
}

// Set up interval for continuous data fetching
setInterval(updateWeather, 300000); // 5 minutes
updateWeather(); // Initial call

    </script>
</body>
</html>
